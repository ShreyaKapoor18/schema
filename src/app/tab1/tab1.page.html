<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      <img class="header-icon" src="assets/imgs/small-icon.png">
      <span class="header-title-thin">sch</span><strong>ema</strong>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-home" no-padding scroll="false">
  <ion-refresher [hidden]="!hideEnrolOptions" slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content color="primary"
      pullingIcon="arrow-dropdown"
      refreshingSpinner="crescent"></ion-refresher-content>
  </ion-refresher>

  <!-- Displayed if user is not enrolled in a study -->
  <ion-img src="assets/imgs/slide2.png" [hidden]="hideEnrolOptions" style="height:100%;"></ion-img>

  <!-- Displays if user is enrolled in a study -->
  <div id="study-list">

    <ion-img *ngIf="study !== null" [hidden]="!hideEnrolOptions" [src]="study.properties.banner_url" style="width:100%;"></ion-img>

    <!--<ion-item-divider color="primary" [hidden]="!hideEnrolOptions">
      <strong>Tasks</strong>
        <ion-button (click)="sortTasksList()" fill="clear" slot="end">
          <ion-icon name="swap" slot="icon-only" class="rotate-90"></ion-icon>
        </ion-button>
    </ion-item-divider>-->

    <div *ngFor="let task of task_list" [hidden]="!hideEnrolOptions">
      <ion-item *ngIf="task.type !== 'header'" detail>
        <ion-icon color="medium" name="{{task.type}}" slot="start"></ion-icon>
        <ion-label [routerLink]="'/survey/' + task.task_id" routerDirection="forward" class="ion-text-wrap">
          <span [innerHTML]="task.name"></span>
          <br>
          <span *ngIf="!task.sticky" class="moment">{{task.moment}}</span>
          <!--<span *ngIf="task.sticky" class="moment">{{task.sticky_label}}</span>-->
        </ion-label>
      </ion-item>

      <ion-item-divider *ngIf="task.type === 'header'" color="secondary">
        <ion-label>
          {{task.label}}
        </ion-label>
      </ion-item-divider>
    </div>

    <!--<ion-item *ngFor="let task of task_list" detail [hidden]="!hideEnrolOptions">

      <ion-icon *ngIf="task.type !== 'header'" color="secondary" name="{{task.type}}" slot="start"></ion-icon>
      <ion-label *ngIf="task.type !== 'header'" [routerLink]="'/survey/' + task.task_id" routerDirection="forward" class="ion-text-wrap">
        <span [innerHTML]="task.name"></span>
        <br>
        <span *ngIf="!task.sticky" class="moment">{{task.moment}}</span>
      </ion-label>
      <ion-label *ngIf="task.type === 'header'">
        Header: {{task.label}}
      </ion-label>
    </ion-item>-->

    <ion-item lines="none" class="ion-text-center" [hidden]="task_list.length">
      <ion-label *ngIf="study !== null" class="ion-text-wrap">
          {{study.properties.empty_msg}}
          <br><br>
          <ion-icon style="font-size:3em;" color="secondary" name="partly-sunny"></ion-icon>
      </ion-label>
    </ion-item>

  </div>
</ion-content>

<ion-footer [hidden]="hideEnrolOptions">
    <ion-item (click)="scanBarcode()" lines="none">
        <ion-label>
          <ion-button expand="full" size="large" color="secondary">{{ 'btn_scan-qr-code' | translate:params }}</ion-button>
        </ion-label>
      </ion-item>  

      <ion-row>
        <ion-col size="6">
          <ion-label>
            <ion-button (click)="enterURL()" expand="full" size="default" fill="clear" color="secondary">{{ 'btn_enter-url' | translate:params }}</ion-button>
          </ion-label>
        </ion-col>
        <ion-col size="6">
          <ion-label>
            <ion-button (click)="enterStudyID()" expand="full" size="default" fill="clear" color="secondary">{{ 'btn_study-id' | translate:params }}</ion-button>
          </ion-label>
        </ion-col>
      </ion-row>
      <!--<ion-item (click)="enterURL()" lines="none">
        <ion-label>
          <ion-button expand="full" size="default" fill="clear" color="secondary">URL</ion-button>
        </ion-label>
      </ion-item>-->
</ion-footer>
